<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Roles and Permissions for Laravel 5 | Pingpong Labs</title>
    <meta name="description" content="An open-sourced Laravel Packages">
    
    
    <link rel="preload" href="/docs/assets/css/11.styles.ec8d0712.css" as="style"><link rel="preload" href="/docs/assets/js/app.9c87c64e.js" as="script"><link rel="preload" href="/docs/assets/js/1.ca286f24.js" as="script"><link rel="prefetch" href="/docs/assets/js/6.627ce2ac.js"><link rel="prefetch" href="/docs/assets/js/2.f1f9fbc5.js"><link rel="prefetch" href="/docs/assets/js/3.bbbd5639.js"><link rel="prefetch" href="/docs/assets/js/4.bcc4f855.js"><link rel="prefetch" href="/docs/assets/js/5.94882323.js"><link rel="prefetch" href="/docs/assets/js/0.f2b4618d.js"><link rel="prefetch" href="/docs/assets/js/7.7f9d05d5.js"><link rel="prefetch" href="/docs/assets/js/8.d869c58f.js"><link rel="prefetch" href="/docs/assets/js/9.1e39cb2b.js"><link rel="prefetch" href="/docs/assets/js/10.a551d427.js">
    <link rel="stylesheet" href="/docs/assets/css/11.styles.ec8d0712.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/docs/" class="home-link router-link-active"><!----><span class="site-name">
      Pingpong Labs
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><!----></div></header><div class="sidebar-mask"></div><div class="sidebar"><!----><!----></div><div class="page"><div class="content"><h1 id="trusty-roles-and-permissions-for-laravel-5"><a href="#trusty-roles-and-permissions-for-laravel-5" aria-hidden="true" class="header-anchor">#</a> Trusty - Roles and Permissions for Laravel 5</h1><ul><li><a href="#installation">Installation</a></li><li><a href="#creating-a-role">Creating A Role</a></li><li><a href="#creating-a-permission">Creating A Permission</a></li><li><a href="#adding-permission-to-role">Adding Permission to Role</a></li><li><a href="#adding-role-to-user">Adding Role to User</a></li><li><a href="#checking-role-user">Checking Role User</a></li><li><a href="#checking-user-permission">Checking User Permission</a></li></ul><p><a name="installation"></a></p><h3 id="installation"><a href="#installation" aria-hidden="true" class="header-anchor">#</a> Installation</h3><p>Open your composer.json file, and add the new required package.</p><div class="language-json extra-class"><pre class="language-json"><code><span class="token property">&quot;pingpong/trusty&quot;</span><span class="token operator">:</span> <span class="token string">&quot;~2.1&quot;</span>
</code></pre></div><p>Next, open a terminal and run.</p><div class="language- extra-class"><pre class="language-text"><code>composer update
</code></pre></div><p>Next, Add new service provider in <code>config/app.php</code>.</p><div class="language-php extra-class"><pre class="language-php"><code>  <span class="token single-quoted-string string">'Pingpong\Trusty\TrustyServiceProvider'</span><span class="token punctuation">,</span>
</code></pre></div><p>Next, Add new aliases in <code>config/app.php</code>.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token single-quoted-string string">'Trusty'</span>      <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Pingpong\Trusty\Facades\Trusty'</span><span class="token punctuation">,</span>
<span class="token single-quoted-string string">'Role'</span>		  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Pingpong\Trusty\Role'</span><span class="token punctuation">,</span>
<span class="token single-quoted-string string">'Permission'</span>  <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token single-quoted-string string">'Pingpong\Trusty\Permission'</span><span class="token punctuation">,</span>
</code></pre></div><p>Next, publish the package's migrations.</p><div class="language- extra-class"><pre class="language-text"><code>php artisan vendor:publish
</code></pre></div><p><strong>NOTE:</strong> If you want to modify the <code>roles</code> and <code>permissions</code> table, you can publish the migration.</p><p>Done.</p><h3 id="usage"><a href="#usage" aria-hidden="true" class="header-anchor">#</a> Usage</h3><p>Add <code>Pingpong\Trusty\Traits\TrustyTrait</code> trait to your <code>User</code> model. For example.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Auth<span class="token punctuation">\</span>UserTrait</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Auth<span class="token punctuation">\</span>UserInterface</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Auth<span class="token punctuation">\</span>Reminders<span class="token punctuation">\</span>RemindableTrait</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Illuminate<span class="token punctuation">\</span>Auth<span class="token punctuation">\</span>Reminders<span class="token punctuation">\</span>RemindableInterface</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">Pingpong<span class="token punctuation">\</span>Trusty<span class="token punctuation">\</span>Traits<span class="token punctuation">\</span>TrustyTrait</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name">User</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token punctuation">\</span>Eloquent</span> <span class="token keyword">implements</span> <span class="token class-name">UserInterface</span><span class="token punctuation">,</span> RemindableInterface <span class="token punctuation">{</span>

	<span class="token keyword">use</span> <span class="token package">UserTrait</span><span class="token punctuation">,</span> RemindableTrait<span class="token punctuation">,</span> TrustyTrait<span class="token punctuation">;</span>

	<span class="token comment">/**
	 * The database table used by the model.
	 *
	 * @var string
	 */</span>
	<span class="token keyword">protected</span> <span class="token variable">$table</span> <span class="token operator">=</span> <span class="token single-quoted-string string">'users'</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
<span class="token delimiter important">?&gt;</span></span>
</code></pre></div><p><a name="creating-a-role"></a></p><h2 id="creating-a-role"><a href="#creating-a-role" aria-hidden="true" class="header-anchor">#</a> Creating A Role.</h2><p>With description.</p><div class="language-php extra-class"><pre class="language-php"><code>Role<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token single-quoted-string string">'name'</span>			<span class="token operator">=</span><span class="token operator">&gt;</span>	<span class="token single-quoted-string string">'Administrator'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'slug'</span>			<span class="token operator">=</span><span class="token operator">&gt;</span>	Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">slug</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Administrator'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'description'</span>	<span class="token operator">=</span><span class="token operator">&gt;</span>	<span class="token single-quoted-string string">'The Super Administrator'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Without description.</p><div class="language-php extra-class"><pre class="language-php"><code>Role<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token single-quoted-string string">'name'</span>	<span class="token operator">=</span><span class="token operator">&gt;</span>	<span class="token single-quoted-string string">'Editor'</span><span class="token punctuation">,</span>
	<span class="token single-quoted-string string">'slug'</span>	<span class="token operator">=</span><span class="token operator">&gt;</span>	Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">slug</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Editor'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="creating-a-role"></a></p><h2 id="creating-a-permission"><a href="#creating-a-permission" aria-hidden="true" class="header-anchor">#</a> Creating A Permission</h2><p>With description.</p><div class="language-php extra-class"><pre class="language-php"><code>Permission<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token single-quoted-string string">'name'</span>			<span class="token operator">=</span><span class="token operator">&gt;</span>	<span class="token single-quoted-string string">'Manage Users'</span><span class="token punctuation">,</span>
 	<span class="token single-quoted-string string">'slug'</span>			<span class="token operator">=</span><span class="token operator">&gt;</span>	Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">slug</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Manage Users'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// manage_users</span>
 	<span class="token single-quoted-string string">'description'</span>	<span class="token operator">=</span><span class="token operator">&gt;</span>	<span class="token single-quoted-string string">'Create, Read, Update and Delete Users'</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Without description.</p><div class="language-php extra-class"><pre class="language-php"><code>Permission<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">create</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
	<span class="token single-quoted-string string">'name'</span>			<span class="token operator">=</span><span class="token operator">&gt;</span>	<span class="token single-quoted-string string">'Manage Posts'</span><span class="token punctuation">,</span>
 	<span class="token single-quoted-string string">'slug'</span>			<span class="token operator">=</span><span class="token operator">&gt;</span>	Str<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">slug</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Manage Posts'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'_'</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token comment">// manage_posts</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="adding-permission-to-role"></a></p><h2 id="adding-permission-to-role"><a href="#adding-permission-to-role" aria-hidden="true" class="header-anchor">#</a> Adding Permission to Role.</h2><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$permission_id</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token variable">$role</span> <span class="token operator">=</span> Role<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token variable">$role</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">permissions</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token variable">$permission_id</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="adding-role-to-user"></a></p><h2 id="adding-role-to-user"><a href="#adding-role-to-user" aria-hidden="true" class="header-anchor">#</a> Adding Role to User.</h2><p>By Role ID.</p><div class="language-php extra-class"><pre class="language-php"><code>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addRole</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>By Slug Or Name.</p><div class="language-php extra-class"><pre class="language-php"><code>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addRole</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'admin'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">addRole</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'Administrator'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><a name="checking-role-user"></a></p><h2 id="checking-role-user"><a href="#checking-role-user" aria-hidden="true" class="header-anchor">#</a> Checking Role User</h2><p>Checking single role.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'administrator'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// your code here</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Multiple roles.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'administrator'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'subscriber'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// your code here</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Or using magic method.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">isAdministrator</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// your code</span>
<span class="token punctuation">}</span>
</code></pre></div><p><a name="checking-user-permission"></a></p><h2 id="checking-user-permission"><a href="#checking-user-permission" aria-hidden="true" class="header-anchor">#</a> Checking User Permission</h2><p>Single check.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">can</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'manage_users'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// your code here</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Checking multiple permissions.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">can</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'manage_users'</span><span class="token punctuation">,</span> <span class="token single-quoted-string string">'manage_pages'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// your code here</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Or using magic method.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token keyword">if</span><span class="token punctuation">(</span>Auth<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">user</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">canManageUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// your code here</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Check permissions against a role.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$role</span> <span class="token operator">=</span> Role<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token variable">$role</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">can</span><span class="token punctuation">(</span><span class="token single-quoted-string string">'manage_users'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// your code here</span>
<span class="token punctuation">}</span>
</code></pre></div><p>Or using magic method.</p><div class="language-php extra-class"><pre class="language-php"><code><span class="token variable">$role</span> <span class="token operator">=</span> Role<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">findOrFail</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token variable">$role</span><span class="token operator">-</span><span class="token operator">&gt;</span><span class="token function">canManageUsers</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token punctuation">{</span>
	<span class="token comment">// your code here</span>
<span class="token punctuation">}</span>
</code></pre></div></div><div class="page-edit"><!----><!----></div><!----></div></div></div>
    <script src="/docs/assets/js/1.ca286f24.js" defer></script><script src="/docs/assets/js/app.9c87c64e.js" defer></script>
  </body>
</html>
